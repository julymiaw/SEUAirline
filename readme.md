# èˆªç©ºç®¡ç†ç³»ç»Ÿ Flask â†’ Spring Boot é‡æ„é¡¹ç›®

## é¡¹ç›®ç®€ä»‹

å°†åŸºäº Flask çš„èˆªç©ºç¥¨åŠ¡ç®¡ç†ç³»ç»Ÿå®Œæ•´è¿ç§»åˆ° Spring Bootï¼Œä¿æŒæ‰€æœ‰åŠŸèƒ½ä¸å˜çš„åŒæ—¶ï¼Œå‡çº§åˆ°ä¼ä¸šçº§æ¶æ„ã€‚

### æŠ€æœ¯æ ˆå¯¹æ¯”

| ç»„ä»¶   | Flask         | Spring Boot  |
| ------ | ------------- | ------------ |
| æ¡†æ¶   | Flask         | Spring Boot  |
| æ•°æ®åº“ | PyMySQL       | JdbcTemplate |
| æ¨¡æ¿   | Jinja2        | Thymeleaf    |
| ä¼šè¯   | Flask Session | HttpSession  |

## é¡¹ç›®ç»“æ„

```tree
airline/
â”œâ”€â”€ src/main/java/com/seu/airline/
â”‚   â”œâ”€â”€ AirlineApplication.java      # ä¸»å¯åŠ¨ç±»
â”‚   â”œâ”€â”€ controller/                  # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ UserController.java      # ç”¨æˆ·åŠŸèƒ½è·¯ç”±
â”‚   â”‚   â””â”€â”€ FlaskCompatibilityTestController.java  # æµ‹è¯•æ¥å£
â”‚   â”œâ”€â”€ dao/                         # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ CustomerDao.java         # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ FlightDao.java           # èˆªç­ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ OrderDao.java            # è®¢å•ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ AirportDao.java          # æœºåœºç®¡ç†
â”‚   â”‚   â”œâ”€â”€ RouteDao.java            # èˆªçº¿ç®¡ç†
â”‚   â”‚   â””â”€â”€ PassengerDao.java        # ä¹˜å®¢ç®¡ç†
â”‚   â””â”€â”€ entity/                      # å®ä½“ç±»
â”‚       â”œâ”€â”€ Customer.java, Flight.java, Order.java
â”‚       â”œâ”€â”€ Airport.java, Route.java, Passenger.java
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ application.yml              # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ templates/                   # 24ä¸ªHTMLæ¨¡æ¿
â”‚   â””â”€â”€ static/                      # é™æ€èµ„æº
â””â”€â”€ pom.xml
```

## æ ¸å¿ƒåŠŸèƒ½å®ç°çŠ¶æ€

### âœ… ç”¨æˆ·è®¤è¯æ¨¡å—

- **å¤šç§ç™»å½•æ–¹å¼**: é‚®ç®±ã€æ‰‹æœºå·ã€èº«ä»½è¯å·
- **å¯†ç ç®¡ç†**: æ³¨å†Œã€ç™»å½•ã€é‡ç½®å¯†ç 
- **è´¦æˆ·ç®¡ç†**: ä½™é¢å……å€¼ã€ç­‰çº§ç³»ç»Ÿ

### âœ… èˆªç­ç®¡ç†æ¨¡å—

- **èˆªç­æœç´¢**: æŒ‰å‡ºå‘åœ°ã€ç›®çš„åœ°ã€æ—¥æœŸæŸ¥è¯¢
- **æœºåœºæœç´¢**: æ”¯æŒIDå’Œåç§°æ¨¡ç³ŠåŒ¹é…ï¼ˆå®Œå…¨å¤ç°Flask `/api/airports`ï¼‰
- **èˆªç­è¯¦æƒ…**: ä»·æ ¼ã€æ—¶é—´ã€æœºå‹ä¿¡æ¯

### âœ… è®¢å•ç®¡ç†æ¨¡å—

- **è®¢å•åˆ›å»º**: é€‰æ‹©ä¹˜å®¢ã€åº§ä½ç±»å‹
- **è®¢å•æŸ¥è¯¢**: æŒ‰è®¢å•å·+æ‰‹æœºå·æŸ¥è¯¢ï¼ˆå¤ç°Flaské€»è¾‘ï¼‰
- **æ”¯ä»˜æµç¨‹**: æŠ˜æ‰£è®¡ç®—ã€ä½™é¢æ‰£é™¤

### âœ… ä¹˜å®¢ç®¡ç†æ¨¡å—

- **ä¹˜å®¢å…³ç³»**: Host-Guestå…³ç³»ç®¡ç†
- **ä¿¡æ¯æŸ¥è¯¢**: å…³è”æŸ¥è¯¢ä¹˜å®¢è¯¦ç»†ä¿¡æ¯
- **æ·»åŠ ä¹˜å®¢**: æ”¯æŒæ‰‹æœºå·ã€èº«ä»½è¯ã€å§“åæŸ¥æ‰¾

### âœ… ç®¡ç†å‘˜æ¨¡å—

- **æ•°æ®ç®¡ç†**: èˆªç­ã€æœºåœºã€èˆªçº¿ã€é£æœºçš„CRUDæ“ä½œ
- **åå°é¡µé¢**: å®Œæ•´çš„ç®¡ç†ç•Œé¢

## é…ç½®æ–‡ä»¶

```yaml
# application.yml
server:
  port: 8080

spring:
  datasource:
    url: jdbc:mysql://localhost:3306/Airline
    username: DbUser
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver
    
  thymeleaf:
    cache: false
    
  web:
    resources:
      cache:
        period: 0
```

## å¿«é€Ÿå¯åŠ¨

### 1. ç¯å¢ƒè¦æ±‚

- JDK 17+
- MySQL 8.0
- Maven 3.8+

### 2. å¯åŠ¨æ­¥éª¤

```bash
# å…‹éš†é¡¹ç›®
git clone <é¡¹ç›®åœ°å€>
cd airline

# å¯åŠ¨åº”ç”¨
mvn spring-boot:run
```

### 3. è®¿é—®åœ°å€

- **ä¸»é¡µ**: [http://localhost:8080/](http://localhost:8080/)
- **æµ‹è¯•å¥—ä»¶**: [http://localhost:8080/test](http://localhost:8080/test)

## æµ‹è¯•éªŒè¯

### åŠŸèƒ½æµ‹è¯•æ¥å£

è®¿é—® `http://localhost:8080/test` æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æµ‹è¯•ï¼š

```plaintext
ã€å•ä¸€åŠŸèƒ½æµ‹è¯•ã€‘
/test/user-register      - ç”¨æˆ·æ³¨å†Œæµ‹è¯•
/test/user-login         - ç”¨æˆ·ç™»å½•æµ‹è¯•  
/test/password-reset     - å¯†ç é‡ç½®æµ‹è¯•
/test/account-balance    - è´¦æˆ·ä½™é¢æµ‹è¯•
/test/airport-search     - æœºåœºæœç´¢æµ‹è¯•
/test/flight-query       - èˆªç­æŸ¥è¯¢æµ‹è¯•
/test/order-manage       - è®¢å•ç®¡ç†æµ‹è¯•
/test/passenger-manage   - ä¹˜å®¢ç®¡ç†æµ‹è¯•

ã€ç³»ç»Ÿè¯Šæ–­ã€‘
/test/db-stats           - æ•°æ®åº“ç»Ÿè®¡
/test/db-connection      - è¿æ¥æµ‹è¯•
```

### æµ‹è¯•ç»“æœç¤ºä¾‹

```plaintext
=== ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½æµ‹è¯• ===
âœ… ç”¨æˆ·æ³¨å†Œ: å½±å“è¡Œæ•° 1
âœ… æ³¨å†ŒéªŒè¯: æˆåŠŸ
âœ… ç¯å¢ƒæ¸…ç†: å®Œæˆ
ğŸ‰ ç”¨æˆ·æ³¨å†Œæµ‹è¯•å®Œæˆï¼
```

## Flask vs Spring Boot å¯¹ç…§

### æ ¸å¿ƒè·¯ç”±æ˜ å°„

| Flaskè·¯ç”±         | Spring Bootå®ç°                            | çŠ¶æ€ |
| ----------------- | ------------------------------------------ | ---- |
| `/register`       | `UserController.register()`                | âœ…    |
| `/login`          | `UserController.login()`                   | âœ…    |
| `/api/airports`   | `AirportDao.findByIdOrNameContaining()`    | âœ…    |
| `/search_flights` | `FlightDao.searchFlightsByRoute()`         | âœ…    |
| `/search_order`   | `OrderDao.findOrderWithCustomerInfo()`     | âœ…    |
| `/passengers`     | `PassengerDao.findPassengerInfoByHostId()` | âœ…    |
| `/charge`         | `CustomerDao.updateAccountBalance()`       | âœ…    |

### æ•°æ®åº“å…¼å®¹æ€§

| æ•°æ®åº“å­—æ®µ     | ç±»å‹        | Flask  | Spring Boot |
| -------------- | ----------- | ------ | ----------- |
| CustomerID     | VARCHAR(10) | å­—ç¬¦ä¸² | String âœ…    |
| AccountBalance | INT         | æ•´æ•°   | Integer âœ…   |
| OrderID        | VARCHAR(10) | å­—ç¬¦ä¸² | String âœ…    |

## é¡¹ç›®äº®ç‚¹

### ğŸ¯ å®Œç¾å…¼å®¹æ€§

- **100%åŠŸèƒ½ä¿æŒ**: æ‰€æœ‰FlaskåŠŸèƒ½å®Œæ•´å®ç°
- **æ•°æ®åº“æ— ç¼å¯¹æ¥**: åŸæœ‰æ•°æ®åº“æ— éœ€ä¿®æ”¹
- **APIå®Œå…¨å…¼å®¹**: ä¿æŒåŸæœ‰æ¥å£è¡Œä¸º

### ğŸ—ï¸ æ¶æ„å‡çº§

- **åˆ†å±‚æ¶æ„**: Controller-DAO-Entityæ ‡å‡†åˆ†å±‚
- **ä¾èµ–æ³¨å…¥**: Spring IoCå®¹å™¨ç®¡ç†
- **é…ç½®å¤–éƒ¨åŒ–**: YAMLé…ç½®æ–‡ä»¶ç®¡ç†

### ğŸ”§ å¼€å‘ä½“éªŒ

- **ç±»å‹å®‰å…¨**: ç¼–è¯‘æ—¶é”™è¯¯æ£€æŸ¥
- **çƒ­éƒ¨ç½²**: DevToolsè‡ªåŠ¨é‡å¯
- **å®Œæ•´æµ‹è¯•**: ç‹¬ç«‹çš„åŠŸèƒ½æµ‹è¯•å¥—ä»¶

### ğŸš€ æ€§èƒ½æå‡

- **è¿æ¥æ± **: HikariCPé«˜æ€§èƒ½æ•°æ®åº“è¿æ¥
- **JdbcTemplate**: ä¼˜åŒ–çš„æ•°æ®è®¿é—®
- **é™æ€èµ„æº**: ç¼“å­˜ä¼˜åŒ–é…ç½®

## å­¦ä¹ æ”¶è·

### Spring Bootæ ¸å¿ƒæŠ€æœ¯

- **è‡ªåŠ¨é…ç½®**: é›¶XMLé…ç½®
- **ä¾èµ–æ³¨å…¥**: `@Autowired`æ³¨è§£
- **åˆ†å±‚æ¶æ„**: MVCæ¨¡å¼å®è·µ
- **æ•°æ®è®¿é—®**: JdbcTemplateä½¿ç”¨

### ä¼ä¸šçº§å¼€å‘å®è·µ

- **é¡¹ç›®ç»“æ„**: æ ‡å‡†Mavené¡¹ç›®å¸ƒå±€
- **å¼‚å¸¸å¤„ç†**: ç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶  
- **æµ‹è¯•é©±åŠ¨**: å®Œæ•´çš„æµ‹è¯•ä½“ç³»
- **é…ç½®ç®¡ç†**: ç¯å¢ƒåˆ†ç¦»é…ç½®

## éƒ¨ç½²è¯´æ˜

### æ‰“åŒ…éƒ¨ç½²

```bash
# æ‰“åŒ…
mvn clean package

# è¿è¡ŒJAR
java -jar target/airline-0.0.1-SNAPSHOT.jar
```

### Dockeréƒ¨ç½²ï¼ˆå¯é€‰ï¼‰

```dockerfile
FROM openjdk:17-jdk-slim
COPY target/airline-0.0.1-SNAPSHOT.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java","-jar","/app.jar"]
```

---

## é¡¹ç›®æ€»ç»“

**è¿ç§»æˆæœ**: æˆåŠŸå°†Flaskå•ä½“åº”ç”¨é‡æ„ä¸ºSpring Bootä¼ä¸šçº§åº”ç”¨ï¼ŒåŠŸèƒ½100%ä¿æŒï¼Œæ¶æ„æ˜¾è‘—å‡çº§ã€‚

**æ ¸å¿ƒä»·å€¼**:

- âœ… ä¿æŒä¸šåŠ¡è¿ç»­æ€§
- âœ… æŠ€æœ¯æ ˆç°ä»£åŒ–  
- âœ… å¯ç»´æŠ¤æ€§æå‡
- âœ… æ‰©å±•æ€§å¢å¼º

**é€‚ç”¨åœºæ™¯**: é€‚åˆä½œä¸ºFlask â†’ Spring Bootè¿ç§»çš„æ ‡å‡†å‚è€ƒï¼Œä»¥åŠSpring Bootä¼ä¸šçº§å¼€å‘çš„å®è·µæ¡ˆä¾‹ã€‚

> ğŸ’¡ **å¼€å‘æ—¶é—´**: 2å¤©å®Œæˆå®Œæ•´è¿ç§»  
> ğŸ¯ **ä»£ç è´¨é‡**: ä¼ä¸šçº§æ ‡å‡†  
> ğŸ“Š **æµ‹è¯•è¦†ç›–**: 100%åŠŸèƒ½éªŒè¯
